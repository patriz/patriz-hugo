box: debian
build:
  steps:
    - install-packages:
        packages: git python-pip python3-pygments
    - pip-install:
        packages_list: "Pygments"
    - script:
        name: initialize git submodules
        code: |
            echo "initialize git submodules"
            git submodule update --init --recursive
    - arjen/hugo-build:
        config: config.toml
        flags: "--buildDrafts=false"
        theme: hemingway2
        version: "0.17"
  after-steps:
    - install-packages:
        packages: git curl
    - miaoxing/github-issue-notify:
        token: $GITHUB_ISSUE_TOKEN
        repo: ziwon/ziwon-hugo
deploy:
  steps:
    - install-packages:
        packages: git ssh-client
    - leipert/git-push:
        gh_oauth: $GIT_TOKEN
        repo: ziwon/ziwon.github.io
        branch: master
        basedir: public
